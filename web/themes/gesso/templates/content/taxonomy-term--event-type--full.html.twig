{#
/**
 * @file
 * Theme override to display a taxonomy term.
 *
 * Available variables:
 * - url: URL of the current term.
 * - name: (optional) Name of the current term.
 * - content: Items for the content of the term (fields and description).
 *   Use 'content' to print them all, or print a subset such as
 *   'content.description'. Use the following code to exclude the
 *   printing of a given child element:
 *   @code
 *   {{ content|without('description') }}
 *   @endcode
 * - attributes: HTML attributes for the wrapper.
 * - page: Flag for the full page state.
 * - term: The taxonomy term entity, including:
 *   - id: The ID of the taxonomy term.
 *   - bundle: Machine name of the current vocabulary.
 * - view_mode: View mode, e.g. 'full', 'teaser', etc.
 *
 * @see template_preprocess_taxonomy_term()
 */
#}
{% set classes = [
  not term.isPublished() ? 'is-unpublished',
] %}

{% set attributes = attributes.addClass(classes) %}

{% set admin_info %}
  {{ region_status }}
{% endset %}
{% set show_admin_info = false %}
{% if admin_info|striptags('<drupal-render-placeholder>')|trim %}
  {% set show_admin_info = true %}
{% endif %}

{% set title_content %}
  {{ content.field_lede|field_value }}
  {{ drupal_view('event_type_taxonomy_term', 'second_next_event_card', term.tid.value) }}
{% endset %}

{% include '@components/page-title/page-title.twig' with {
  page_title: content.field_display_name|field_value is not empty ? content.field_display_name|field_value : name,
  lede: title_content,
  sidebar_content: drupal_view('event_type_taxonomy_term', 'next_event_large_card', term.tid.value),
  modifier_classes: 'l-section--gray-gradient',
  has_constrain: true,
} %}

{% set term_content %}
  {% include '@layouts/section/section.twig' with {
    'section_content': content.field_content,
    'has_constrain': true,
    'modifier_classes': 'l-section--white',
  } %}
{% endset %}

{% include '@components/article/article.twig' with {
  'title': null,
  'lede': null,
  'show_admin_info': show_admin_info,
  'admin_info': admin_info,
  'show_footer': false,
  'rdf_metadata': metadata,
  'content': term_content,
} %}

{% set catch_cache = content|render %}
